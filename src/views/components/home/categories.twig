<div>
    <h2 class="categoris-title">{{ component.category_title }}</h2>
    <p class="categoris-description">{{ component.category_description }}</p>
    <div class="all-categoris">
        {% for category in component.collection %}

  {# 1) خِذ الحقل الموجود: slug أو id أو link أو name (تفضيل) #}
  {% set slug_from_field = category.slug
        | default(category.link)
        | default(category.path)
        | default(category.id)
        | default(category.category_slug)
        | default(category.category_id) %}

  {# 2) لو ما في أي من الحقول السابقة اصنع slug من الاسم (category_name أو name) #}
  {% if slug_from_field %}
    {% set category_href = '/' ~ slug_from_field %}
  {% else %}
    {# صنع slug بسيط: حوّل للحروف الصغيرة واستبدل الفراغات بشرطة وصفيّة من أحرف غير مرغوبة #}
    {% set raw_name = category.category_name | default(category.name) | default('category') %}
    {% set safe_slug = raw_name
         | lower
         | replace({' ': '-' , 'ـ': '-' , '_': '-'}) 
         | replace({'/':'','\\':'','?':'','%':'','!':'','@':'','#':'','$':'&': ''}) %}
    {% set category_href = '/' ~ safe_slug %}
  {% endif %}

  <a href="{{ category_href }}" class="one-img">
    <img class="cat-img" src="{{ category.category_image }}" alt="{{ category.category_name|default(category.name) }}" />
    <p class="cat-title">{{ category.category_name|default(category.name) }}</p>
    <p class="cat-desc">{{ category.category_number }}</p>
  </a>

{% endfor %}

    </div>
</div>
<style>
    .categoris-title {
        text-align: center;
        font-size: 24px;
        margin-top: 50px;
        color: #0F1939;
        font-weight: 700;
    }

    .categoris-description {
        color: #666666;
        text-align: center;
    }

    .cat-img {
        width: 210px;
        height: 210px;
        border-radius: 50%;
    }

    .one-img {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
    }

    .cat-title {
        color: #0F1939;
        font-size: 20px;
        font-weight: 600;
        margin-top: 10px;
    }

    .cat-desc {
        color: #666666;
        font-size: 16px;
    }

    .all-categoris {
        margin-top: 30px;
        display: flex;
        flex-wrap: wrap;
        align-items: center;
        justify-content: center;
        gap: 50px;
    }

    @media screen and (max-width: 584px) {
        .cat-img {
            width: 170px;
            height: 170px;
            border-radius: 50%;
        }
    }
</style>